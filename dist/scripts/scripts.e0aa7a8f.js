"use strict";angular.module("decisionApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngDragDrop","LocalStorageModule","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),function(a,b,c){var d=b.module("ngDragDrop",[]).service("ngDragDropService",["$timeout","$parse",function(e,f){this.callEventCallback=function(a,b,c,d){function e(b){var c=-1!==b.indexOf("(")?b.indexOf("("):b.length,d=-1!==b.lastIndexOf(")")?b.lastIndexOf(")"):b.length,e=b.substring(c+1,d),g=b.match(/^[^.]+.\s*/)[0].slice(0,-1);return g=a[g]&&"function"==typeof a[g].constructor?g:null,{callback:b.substring(g&&g.length+1||0,c),args:(e&&e.split(",")||[]).map(function(b){return f(b)(a)}),constructor:g}}if(b){var g=e(b),h=g.callback,i=g.constructor,j=[c,d].concat(g.args);a.$apply((a[h]||a[i][h]).apply(a,j))}},this.invokeDrop=function(a,f,g,h){var i,j,k="",l="",m={},n={},o=null,p={},q={},r=null,s=f.scope(),t=a.scope();k=a.ngattr("ng-model"),l=f.ngattr("ng-model"),i=t.$eval(k),j=s.$eval(l),r=f.find("[jqyoui-draggable]:last,[data-jqyoui-draggable]:last"),n=s.$eval(f.attr("jqyoui-droppable")||f.attr("data-jqyoui-droppable"))||[],m=t.$eval(a.attr("jqyoui-draggable")||a.attr("data-jqyoui-draggable"))||[],m.index=this.fixIndex(t,m,i),n.index=this.fixIndex(s,n,j),o=b.isArray(i)?m.index:null,p=b.copy(b.isArray(i)?i[o]:i),q=b.isArray(j)&&n&&n.index!==c?j[n.index]:b.isArray(j)?{}:j,q=b.copy(q),m.animate===!0?(this.move(a,r.length>0?r:f,null,"fast",n,null),this.move(r.length>0&&!n.multiple?r:[],a.parent("[jqyoui-droppable],[data-jqyoui-droppable]"),d.startXY,"fast",n,b.bind(this,function(){e(b.bind(this,function(){a.css({position:"relative",left:"",top:""}),r.css({position:"relative",left:"",top:"",display:""}),this.mutateDraggable(t,n,m,k,l,q,a),this.mutateDroppable(s,n,m,l,p,o),this.callEventCallback(s,n.onDrop,g,h)}))}))):e(b.bind(this,function(){this.mutateDraggable(t,n,m,k,l,q,a),this.mutateDroppable(s,n,m,l,p,o),this.callEventCallback(s,n.onDrop,g,h)}))},this.move=function(b,d,e,f,g,h){if(0===b.length)return h&&a.setTimeout(function(){h()},300),!1;var i=9999,j=b[g.containment||"offset"](),k=d&&d.is(":visible"),l=d.hasClass("ng-hide");null===e&&d.length>0&&((d.attr("jqyoui-draggable")||d.attr("data-jqyoui-draggable"))!==c&&d.ngattr("ng-model")!==c&&d.is(":visible")&&g&&g.multiple?(e=d[g.containment||"offset"](),g.stack===!1?e.left+=d.outerWidth(!0):e.top+=d.outerHeight(!0)):(l&&d.removeClass("ng-hide"),e=d.css({visibility:"hidden",display:"block"})[g.containment||"offset"](),d.css({visibility:"",display:k?"block":"none"}))),b.css({position:"absolute","z-index":i}).css(j).animate(e,f,function(){l&&d.addClass("ng-hide"),h&&h()})},this.mutateDroppable=function(a,c,d,e,g,h){var i=a.$eval(e);a.dndDragItem=g,b.isArray(i)?(c&&c.index>=0?i[c.index]=g:i.push(g),d&&d.placeholder===!0&&(i[i.length-1].jqyoui_pos=h)):(f(e+" = dndDragItem")(a),d&&d.placeholder===!0&&(i.jqyoui_pos=h))},this.mutateDraggable=function(a,d,e,g,h,i,j){var k=b.equals(i,{}),l=a.$eval(g);a.dndDropItem=i,e&&e.placeholder?"keep"!=e.placeholder&&(b.isArray(l)&&e.index!==c?l[e.index]=i:f(g+" = dndDropItem")(a)):b.isArray(l)?k?e&&e.placeholder!==!0&&"keep"!==e.placeholder&&l.splice(e.index,1):l[e.index]=i:(f(g+" = dndDropItem")(a),a.$parent&&f(g+" = dndDropItem")(a.$parent)),j.css({"z-index":"",left:"",top:""})},this.fixIndex=function(a,d,e){if(d.applyFilter&&b.isArray(e)&&e.length>0){var f=a[d.applyFilter](),g=f[d.index],h=c;return e.forEach(function(a,c){b.equals(a,g)&&(h=c)}),h}return d.index}}]).directive("jqyouiDraggable",["ngDragDropService",function(a){return{require:"?jqyouiDroppable",restrict:"A",link:function(c,e,f){var g,h,i,j=function(j){j?(g=c.$eval(e.attr("jqyoui-draggable")||e.attr("data-jqyoui-draggable"))||{},h=c.$eval(f.jqyouiOptions)||{},e.draggable({disabled:!1}).draggable(h).draggable({start:function(e,f){i=b.element(h.helper?f.helper:this).css("z-index"),b.element(h.helper?f.helper:this).css("z-index",9999),d.startXY=b.element(this)[g.containment||"offset"](),a.callEventCallback(c,g.onStart,e,f)},stop:function(d,e){b.element(h.helper?e.helper:this).css("z-index",i),a.callEventCallback(c,g.onStop,d,e)},drag:function(b,d){a.callEventCallback(c,g.onDrag,b,d)}})):e.draggable({disabled:!0})};c.$watch(function(){return c.$eval(f.drag)},j),j(),e.on("$destroy",function(){e.draggable("destroy")})}}}]).directive("jqyouiDroppable",["ngDragDropService",function(a){return{restrict:"A",priority:1,link:function(c,d,e){var f,g=function(g){g?(f=c.$eval(b.element(d).attr("jqyoui-droppable")||b.element(d).attr("data-jqyoui-droppable"))||{},d.droppable({disabled:!1}).droppable(c.$eval(e.jqyouiOptions)||{}).droppable({over:function(b,d){a.callEventCallback(c,f.onOver,b,d)},out:function(b,d){a.callEventCallback(c,f.onOut,b,d)},drop:function(d,g){b.element(g.draggable).ngattr("ng-model")&&e.ngModel?a.invokeDrop(b.element(g.draggable),b.element(this),d,g):a.callEventCallback(c,f.onDrop,d,g)}})):d.droppable({disabled:!0})};c.$watch(function(){return c.$eval(e.drop)},g),g(),d.on("$destroy",function(){d.droppable("destroy")})}}}]);$.fn.ngattr=function(a){var c=b.element(this).get(0);return c.getAttribute(a)||c.getAttribute("data-"+a)}}(window,window.angular),angular.module("decisionApp").controller("MainCtrl",["$scope","localStorageService",function(a,b){a.columnStep=1,a.columnWeightStep=2,a.rowStep=3,a.matrixStep=4,a.dragCallback=function(a,b,c){console.log("drag",c)},a.dropCallback=function(b,c,d){console.log("drop",d,a.steps[a.matrixStep].data)},a.addRow=function(){if(a.steps[a.columnStep].data.length!==a.steps[a.matrixStep].data.length){a.steps[a.matrixStep].data=[];for(var b=0;b<a.steps[a.columnStep].data.length;b+=1)a.steps[a.matrixStep].data.push(a.steps[a.rowStep].data.slice(0))}},a.setInitialState=function(c){c&&b.clearAll(),a.step=b.get("step")?Number(b.get("step")):0,a.steps=b.get("steps")?b.get("steps"):[{title:"Define the Problem",description:"Take some time on this one. Oftentimes, a problem is poorly defined or identified as a symptom rather than the root cause.",data:[],multiple:!1,dependent:!1},{title:"Determine Values",description:"Values are different aspects of a problem that influence the final decision. For example, a choice for a job may be influenced by location, wages, culture, and the others.",data:[],multiple:!0,dependent:!1},{title:"Weight Importance of Values",description:"The values may carry different weight as well. Keeping with jobs example, a desire to reduce commute time might be relatively more important than wages. You can use whatever scale you want (i.e. 1-100), but just note that higher numbers indicate that you prefer the value more.",data:[],multiple:!1,dependent:!0},{title:"Identify Choices",description:"You often have a number of choices at a particular time. Try to identify all of the relevant ones for your problem.",data:[],multiple:!0,dependent:!1},{title:"Rate Each Choice",description:"This can be tough. Take determine how you would rate each choice for each particular value. Again, you can use whatever scale you want (i.e. 1-100), but just note that higher numbers indicate that you prefer the value more.",data:[],multiple:!0,dependent:!0},{title:"Find Optimal Decision",description:"",data:[],dependent:!0,multiple:!0}]},a.previous=function(){b.set("steps",a.steps),a.step-=1},a.submitted=!1,a.getWeight=function(a,b){return a.length-a.indexOf(b)},a.next=function(c){if(!c)return void(a.submitted=!0);if(a.step===a.rowStep&&a.addRow(),a.step===a.matrixStep)for(var d=Array.apply(null,new Array(a.steps[a.rowStep].data.length)).map(Number.prototype.valueOf,0),e=0;e<a.steps[a.rowStep].data.length;e+=1){for(var f=0;f<a.steps[a.columnStep].data.length;f+=1)d[a.steps[a.rowStep].data.indexOf(a.steps[a.matrixStep].data[f][e])]+=a.getWeight(a.steps[a.matrixStep].data[f],a.steps[a.matrixStep].data[f][e])*a.getWeight(a.steps[a.columnStep].data,a.steps[a.columnStep].data[f]);a.steps[a.step+1].data=d}a.step+=1,a.submitted=!1,b.set("steps",a.steps),b.set("step",a.step)},a.setInitialState(!1)}]),angular.module("decisionApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);